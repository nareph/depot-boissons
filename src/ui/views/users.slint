// src/ui/views/users.slint (Corrigé)

import { UserList } from "../components/user_list.slint";
import { UserUI } from "../components/models.slint";

// Hériter d'un layout est une bonne pratique
export component UsersView inherits VerticalLayout {
    in property <bool> is_admin;
    in property <[UserUI]> users_model;
    callback add_user_clicked;
    callback delete_user_clicked(string);

    if root.is_admin: UserList {
        users: root.users_model;
        add-user => { root.add_user_clicked(); }
        delete-user(user_id) => { root.delete_user_clicked(user_id); }
    }
    
    if !root.is_admin: Rectangle {
        background: rgba(255, 107, 107, 0.1);
        border-radius: 16px;
        //margin: 25px;
        
        VerticalLayout {
            padding: 30px;
            alignment: center;
            spacing: 15px;
            
            Text {
                text: "⛔ Accès non autorisé";
                font-size: 22px;
                font-weight: 700;
                color: #ff6b6b;
            }
            Text {
                text: "Cette section est réservée aux administrateurs.";
                color: #ddd;
            }
        }
    }
}